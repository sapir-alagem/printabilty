{"ast":null,"code":"import { PaymentMethod } from \"@stripe/stripe-react-native\";\nimport { Alert } from \"react-native\";\nimport { useCreatePaymentIntentMutation } from \"../paymentApi\";\nconst total = 523640;\nconst [createPaymemntIntent] = useCreatePaymentIntentMutation();\nconst {\n  initPaymentSheet,\n  presentPaymentSheet\n} = userStripe();\nconst onCheckout = async () => {\n  // 1. Create a payment intent\n  const response = await createPaymemntIntent({\n    amount: Math.floor(total * 100)\n  });\n  if (response.error) {\n    console.log(response.error);\n    Alert.alert('Something went wrong');\n    return;\n  }\n\n  // 2. Initialize the Payment sheet\n  const initResponse = await initPaymentSheet({\n    merchantDisplayName: 'Printabilty',\n    paymentIntentClientSecret: response.data.paymentIntent\n  });\n  if (initResponse.error) {\n    console.log(initResponse.error);\n    Alert.alert('Something went wrong');\n    return;\n  }\n\n  // 3. Present the Payment Sheet from Stripe\n  const paymentResponce = await presentPaymentSheet();\n  if (paymentResponce.error) {\n    Alert.alert(`Error code: ${paymentResponce.error.code}`, paymentResponce.error.message);\n    return;\n  }\n  // 4. If payment ok -> create the order\n  onCreateOrder();\n};\nconst onCreateOrder = async req => {\n  const resukt = await onCreateOrder({\n    fileName: req.body.fileName,\n    printPrice: req.body.price\n  });\n};","map":{"version":3,"names":["PaymentMethod","Alert","useCreatePaymentIntentMutation","total","createPaymemntIntent","initPaymentSheet","presentPaymentSheet","userStripe","onCheckout","response","amount","Math","floor","error","console","log","alert","initResponse","merchantDisplayName","paymentIntentClientSecret","data","paymentIntent","paymentResponce","code","message","onCreateOrder","req","resukt","fileName","body","printPrice","price"],"sources":["C:/Users/safirma/Documents/GitHub/printabilty/frontend/src/Payments/pages/printing_details_page.js"],"sourcesContent":["import { PaymentMethod } from \"@stripe/stripe-react-native\";\r\nimport { Alert } from \"react-native\";\r\nimport { useCreatePaymentIntentMutation } from \"../paymentApi\"; \r\n\r\nconst total = 523640\r\nconst [createPaymemntIntent] = useCreatePaymentIntentMutation();\r\nconst { initPaymentSheet, presentPaymentSheet} = userStripe();\r\n\r\nconst onCheckout = async () => {\r\n    // 1. Create a payment intent\r\n   const response = await createPaymemntIntent({amount: Math.floor(total * 100)});\r\n   if (response.error) {\r\n        console.log(response.error);\r\n        Alert.alert('Something went wrong');\r\n        return;\r\n   }\r\n\r\n    // 2. Initialize the Payment sheet\r\n    const initResponse = await initPaymentSheet({\r\n        merchantDisplayName: 'Printabilty',\r\n        paymentIntentClientSecret: response.data.paymentIntent,\r\n\r\n    });\r\n    if (initResponse.error) {\r\n        console.log(initResponse.error);\r\n        Alert.alert('Something went wrong');\r\n        return;\r\n    }\r\n    \r\n    // 3. Present the Payment Sheet from Stripe\r\n    const paymentResponce = await presentPaymentSheet();\r\n    if (paymentResponce.error) {\r\n        Alert.alert(\r\n            `Error code: ${paymentResponce.error.code}`, \r\n            paymentResponce.error.message\r\n        );\r\n        return;\r\n    }\r\n    // 4. If payment ok -> create the order\r\n    onCreateOrder();\r\n  };\r\n\r\n  const onCreateOrder = async (req) => {\r\n    const resukt = await onCreateOrder({\r\n        fileName: req.body.fileName,\r\n        printPrice: req.body.price,\r\n    })\r\n  };\r\n\r\n"],"mappings":"AAAA,SAASA,aAAa,QAAQ,6BAA6B;AAC3D,SAASC,KAAK,QAAQ,cAAc;AACpC,SAASC,8BAA8B,QAAQ,eAAe;AAE9D,MAAMC,KAAK,GAAG,MAAM;AACpB,MAAM,CAACC,oBAAoB,CAAC,GAAGF,8BAA8B,CAAC,CAAC;AAC/D,MAAM;EAAEG,gBAAgB;EAAEC;AAAmB,CAAC,GAAGC,UAAU,CAAC,CAAC;AAE7D,MAAMC,UAAU,GAAG,MAAAA,CAAA,KAAY;EAC3B;EACD,MAAMC,QAAQ,GAAG,MAAML,oBAAoB,CAAC;IAACM,MAAM,EAAEC,IAAI,CAACC,KAAK,CAACT,KAAK,GAAG,GAAG;EAAC,CAAC,CAAC;EAC9E,IAAIM,QAAQ,CAACI,KAAK,EAAE;IACfC,OAAO,CAACC,GAAG,CAACN,QAAQ,CAACI,KAAK,CAAC;IAC3BZ,KAAK,CAACe,KAAK,CAAC,sBAAsB,CAAC;IACnC;EACL;;EAEC;EACA,MAAMC,YAAY,GAAG,MAAMZ,gBAAgB,CAAC;IACxCa,mBAAmB,EAAE,aAAa;IAClCC,yBAAyB,EAAEV,QAAQ,CAACW,IAAI,CAACC;EAE7C,CAAC,CAAC;EACF,IAAIJ,YAAY,CAACJ,KAAK,EAAE;IACpBC,OAAO,CAACC,GAAG,CAACE,YAAY,CAACJ,KAAK,CAAC;IAC/BZ,KAAK,CAACe,KAAK,CAAC,sBAAsB,CAAC;IACnC;EACJ;;EAEA;EACA,MAAMM,eAAe,GAAG,MAAMhB,mBAAmB,CAAC,CAAC;EACnD,IAAIgB,eAAe,CAACT,KAAK,EAAE;IACvBZ,KAAK,CAACe,KAAK,CACN,eAAcM,eAAe,CAACT,KAAK,CAACU,IAAK,EAAC,EAC3CD,eAAe,CAACT,KAAK,CAACW,OAC1B,CAAC;IACD;EACJ;EACA;EACAC,aAAa,CAAC,CAAC;AACjB,CAAC;AAED,MAAMA,aAAa,GAAG,MAAOC,GAAG,IAAK;EACnC,MAAMC,MAAM,GAAG,MAAMF,aAAa,CAAC;IAC/BG,QAAQ,EAAEF,GAAG,CAACG,IAAI,CAACD,QAAQ;IAC3BE,UAAU,EAAEJ,GAAG,CAACG,IAAI,CAACE;EACzB,CAAC,CAAC;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}